<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    Options -Indexes
    DirectoryIndex public/index.php

    # Block direct access to sensitive files in the project root
    RewriteRule ^(\.env|artisan|composer\.(json|lock)|package(-lock)?\.json|phpunit\.xml|vite\.config\.js|webpack.*|server\.php|README\.md)$ - [F,L,NC]

    # Serve existing files in the root as-is (but not directories)
    RewriteCond %{REQUEST_FILENAME} -f
    RewriteRule ^ - [L]

    # If requesting the site root, go to public/
    RewriteRule ^$ public/ [L]

    # Otherwise, route everything to the public/ directory
    RewriteRule ^(.*)$ public/$1 [L,QSA]
</IfModule>
